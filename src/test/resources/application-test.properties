# 测试环境配置
spring.application.name=med_ai_assistant_backend_test
server.port=8083

# 测试数据库配置 - 使用本地Oracle数据库
app.datasource.type=oracle

# Oracle测试数据库配置
oracle.server.active=local
oracle.server.local.ip=${TEST_DB_HOST:127.0.0.1}
oracle.server.local.sid=${TEST_DB_SID:FREE}
oracle.server.local.username=${TEST_DB_USERNAME:system}
oracle.server.local.password=${TEST_DB_PASSWORD:Liuzh_123}

# 主数据源配置
spring.datasource.url=jdbc:oracle:thin:@${oracle.server.${oracle.server.active}.ip}:1521/${oracle.server.${oracle.server.active}.sid}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
spring.datasource.username=${oracle.server.${oracle.server.active}.username}
spring.datasource.password=${oracle.server.${oracle.server.active}.password}

# JPA/Hibernate配置
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.hbm2ddl.auto=none
spring.jpa.database-platform=org.hibernate.dialect.OracleDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=never

# HikariCP连接池配置
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=45000
spring.datasource.hikari.max-lifetime=90000
spring.datasource.hikari.keepalive-time=30000
spring.datasource.hikari.initialization-fail-timeout=0
spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL
spring.datasource.hikari.connection-init-sql=ALTER SESSION SET NLS_DATE_FORMAT='YYYY-MM-DD HH24:MI:SS'

# 禁用Web和调度组件
spring.main.web-application-type=reactive
spring.task.scheduling.enabled=false
scheduling.auto-execute.enabled=false
prompt.submission.enabled=false
prompt.polling.enabled=false
monitoring.metrics.enabled=false

# 禁用执行服务器数据源
execution.datasource.enabled=false

# Hospital配置文件监控禁用
hospital.config.watch-enabled=false

# 日志配置
logging.level.org.springframework.boot.autoconfigure=ERROR
logging.level.org.hibernate=WARN
logging.level.com.zaxxer.hikari=WARN
